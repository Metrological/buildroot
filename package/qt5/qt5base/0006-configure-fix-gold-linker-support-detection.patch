From 53e2db74dba8135bd88bad48fbf9f2fc81ed4f8b Mon Sep 17 00:00:00 2001
From: Peter Korsgaard <peter@korsgaard.com>
Date: Sun, 15 Feb 2015 22:58:07 +0100
Subject: [PATCH 1/1] configure: fix gold linker support detection

While the -fuse-ld=gold flag is related to linking, it is an argument to the
compiler driver to tell it what linker to execute, NOT an option to tell the
linker to behave differently.

So it shouldn't get prefixed with -Wl when passed though the compiler driver.

Change-Id: I2b50cb6d2bd8911aa9b305cd8e755d4dfe923041
Reviewed-by: Oswald Buddenhagen <oswald.buddenhagen@theqtcompany.com>
Reviewed-by: Joerg Bornemann <joerg.bornemann@theqtcompany.com>
---
 configure | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/configure b/configure
index 043d9fc..987d7f0 100755
--- a/configure
+++ b/configure
@@ -3263,7 +3263,7 @@ fi
 
 # auto-detect -fuse-ld=gold support
 if [ "$CFG_USE_GOLD_LINKER" != "no" ]; then
-    if linkerSupportsFlag $TEST_COMPILER -fuse-ld=gold; then
+    if compilerSupportsFlag $TEST_COMPILER -fuse-ld=gold; then
        CFG_USE_GOLD_LINKER=yes
     else
         if [ "$CFG_USE_GOLD_LINKER" = "yes" ]; then
-- 
2.6.2.2.g1b5ffa3

