From 53d70cef06876c306b4aaaadd36365dc8431fd8a Mon Sep 17 00:00:00 2001
From: Allan Sandfeld Jensen <allan.jensen@digia.com>
Date: Mon, 13 Oct 2014 17:05:07 +0200
Subject: [PATCH] Get rid of old harmattan workaround hurting Qt on ARM

Change-Id: Ieecee7c05e78117e8c9fc335f60970e2144ede81
Reviewed-by: Michael Bruning <michael.bruning@digia.com>
---
 Source/WTF/wtf/PassRefPtr.h | 14 ++------------
 1 file changed, 2 insertions(+), 12 deletions(-)

diff --git a/Source/WTF/wtf/PassRefPtr.h b/Source/WTF/wtf/PassRefPtr.h
index 1e1c777..848fc5f 100644
--- a/Source/WTF/wtf/PassRefPtr.h
+++ b/Source/WTF/wtf/PassRefPtr.h
@@ -32,28 +32,18 @@ namespace WTF {
 
     inline void adopted(const void*) { }
 
-#if !(PLATFORM(QT) && CPU(ARM))
-    #define REF_DEREF_INLINE ALWAYS_INLINE
-#else
-    // Older version of gcc used by Harmattan SDK fails to build with ALWAYS_INLINE.
-    // See https://bugs.webkit.org/show_bug.cgi?id=37253 for details.
-    #define REF_DEREF_INLINE inline
-#endif
-
-    template<typename T> REF_DEREF_INLINE void refIfNotNull(T* ptr)
+    template<typename T> ALWAYS_INLINE void refIfNotNull(T* ptr)
     {
         if (LIKELY(ptr != 0))
             ptr->ref();
     }
 
-    template<typename T> REF_DEREF_INLINE void derefIfNotNull(T* ptr)
+    template<typename T> ALWAYS_INLINE void derefIfNotNull(T* ptr)
     {
         if (LIKELY(ptr != 0))
             ptr->deref();
     }
 
-    #undef REF_DEREF_INLINE
-
     template<typename T> class PassRefPtr {
     public:
         PassRefPtr() : m_ptr(0) { }
